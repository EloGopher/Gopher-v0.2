var GopherLimit=500,GopherMsgs=[];window.onerror=function(e,o,n){try{var t={};t.Type="er",t.CodeLine=n,t.FileName=encodeURIComponent(o),t.Msg=encodeURIComponent(e),GopherMsgs.push(t),gopher.sendlog()}catch(r){}};var gopher=new function(){function e(e){var o={};return e&&"[object Function]"===o.toString.call(e)}var o=250;JSON.stringifyOnce=function(e,o,n){function t(n,t){if(r.length>100)return"object too long";var i=!1;if(r.forEach(function(e,o){e===t&&(i=o)}),""==n)return r.push(e),s.push("root"),t;if(i+""!="false"&&"object"==typeof t)return"root"==s[i]?"(pointer to root)":"(see "+(t&&t.constructor?t.constructor.name.toLowerCase():typeof t)+" with key "+s[i]+")";var p=n||"(empty key)";return r.push(t),s.push(p),o?o(n,t):t}var r=[],s=[];return JSON.stringify(e,t,n)},this.param=function(e){var o="";for(var n in e)e.hasOwnProperty(n)&&(o.length>0&&(o+="&"),o+=encodeURI(n+"="+e[n]));return o},this.sendlog=function(){if(0!==GopherMsgs.length&&o>1){o--;var e=(JSON.stringify(GopherMsgs),GopherMsgs.length),n=new XMLHttpRequest;n.open("POST",encodeURI("[parentfolder]gopher/gopherMini.php")),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=function(){if(200===n.status){for(var o=0;e>o;o++)GopherMsgs.shift();setTimeout(gopher.sendlog,1e3)}else 200!==n.status&&setTimeout(gopher.sendlog,1e3)},n.send(gopher.param({type:"jslogpost",data:JSON.stringify(GopherMsgs)}))}else setTimeout(gopher.sendlog,1e3)},this.tell=function(e,o,n,t){if(GopherMsgs.length<GopherLimit){var r={};r.Type="gt",r.CodeLine=e,r.FileName=encodeURIComponent(o),r.Msg=encodeURIComponent(n),r.Tags=encodeURIComponent(t),GopherMsgs.push(r)}},this.track=function(o,n,t,r,s){if(GopherMsgs.length<GopherLimit){var i={};i.Type="vt",i.CodeLine=o,i.FileName=encodeURIComponent(n),i.VarName=encodeURIComponent(t),i.VarValue=void 0===r?"{UNDEFINED}":Array.isArray(r)?""+r:"object"==typeof r?JSON.stringifyOnce(r):e(r)?"{FUNCTION}":r,i.VarValue=encodeURIComponent(i.VarValue),i.Tags=s,GopherMsgs.push(i)}}};gopher.sendlog();
